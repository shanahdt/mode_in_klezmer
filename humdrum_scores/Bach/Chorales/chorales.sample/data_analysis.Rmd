---
title: "Some Data Analysis"
output: html_notebook
---

## Introduction
So we finally have our data. What do we do now?

Recall we have three hypotheses:

* H1: entropy between parts is correlated.
* H2: entropy in soprano parts is correlated with amount of suspensions
* H3: npvi is correlated with entropy of specific parts (not a specific hypothesis; I don't know which parts).

### Correlation of Entropy between Parts

We might first begin by looking at the entropy between parts. We've looked at it with a correlation matrix (with the _corrplot_ library), but we could also try other ways of going about it. 

Let's unpack some R code. Here is a setup to set my working directory, and read the data into a dataframe:

```{r}

setwd("~/corpora/humdrum_scores/Bach/Chorales/chorales.sample/")
my_data <- read.table("my_data.tsv", header =T)
```

Now let's subset the data so I'm only looking at the file name, the part number, and the entropy.
```{r}
entropy <- my_data[,1:3]
```

We can do some exploratory work and see what the information looks like with a _density plot_.


```{r}
library(ggplot2)
g <- ggplot(entropy, aes(entropy))
g + geom_density(aes(fill=factor(part)), alpha=0.8) + 
    labs(title="Entropy", 
         subtitle="Amount of Information in each voice",
         x="Entropy",
         fill="Part number")
```

```{r}
library(corrplot)
corrplot(my_data)
M<-cor(my_data)
corrplot(M, method="circle")
```

### Hypothesis 2

The entropy of the soprano part is correlated with the amount of suspensions.

```{r}
variables_wanted <- c(3,8)
h2 <- my_data[,variables_wanted]
h2 <- log1p(h2)
lm_model <- lm(h2$entropy ~ h2$sus)

plot.new(h2$entropy, h2$sus)
abline(lm_model, col="blue")
```